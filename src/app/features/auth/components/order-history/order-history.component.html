<section class="container mx-auto px-4 py-8">
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-2xl md:text-3xl font-bold text-gray-900">Orders</h1>
    </div>

    @if (error) {
    <div class="p-8 text-center text-red-600 border rounded-2xl bg-red-50">
        <div class="mb-2">
            <i class="fa-exclamation-triangle text-2xl"></i>
        </div>
        <p class="font-medium">{{ error }}</p>
        <button (click)="ngOnInit()"
            class="mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors">
            Try Again
        </button>
    </div>
    } @else {
    @if ((orders$ | async); as orders) {
    @if (orders && orders.length) {
    <div class="space-y-4">
        @for (order of orders; track order._id) {
        <a class="p-5 border rounded-2xl bg-white block hover:shadow-sm" [routerLink]="['/orders', order._id]">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
                <div class="min-w-0">
                    <div class="font-semibold truncate">Order #{{ order._id }}</div>
                    <div class="text-sm text-gray-500">{{ order.createdAt | date:'medium' }}</div>
                </div>
                <div class="flex items-center gap-2">
                    <span class="inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-full"
                        [ngClass]="order.isPaid ? 'bg-emerald-50 text-emerald-700' : 'bg-yellow-50 text-yellow-700'">{{
                        order.isPaid ? 'Paid' : 'Unpaid' }}</span>
                    <span class="inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-full"
                        [ngClass]="order.isDelivered ? 'bg-emerald-50 text-emerald-700' : 'bg-gray-100 text-gray-700'">{{
                        order.isDelivered ? 'Delivered' : 'Processing' }}</span>
                </div>
                <div class="text-emerald-700 font-semibold whitespace-nowrap">{{ order.totalOrderPrice | currency }}
                </div>
            </div>
        </a>
        }
    </div>
    } @else {
    <div class="p-8 text-center text-gray-600 border rounded-2xl bg-white">
        <div class="mb-2">
            <i class="fa-shopping-bag text-4xl text-gray-400"></i>
        </div>
        <p class="font-medium">No orders yet</p>
        <p class="text-sm text-gray-500 mt-1">Start shopping to see your orders here</p>
    </div>
    }
    } @else {
    <div class="p-8 text-center text-gray-600 border rounded-2xl bg-white">
        <div class="flex items-center justify-center">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600"></div>
            <span class="ml-2">Loading orders...</span>
        </div>
    </div>
    }
    }
</section>